/* Automatically generated by build.js on Thu May 17 2012 17:02:17 GMT-0400 (EDT). See it for details. */
var JSCrx=function(a){function d(){if(this===window)return new d;this.zip={},this.zip.string="",this.privateKey={},this.privateKey.der="",this.publicKey={},this.publicKey.der="",this.sign={},this.sign.der="",this.crx={},this.worker=new Worker(a),this.worker.onerror=function(a){throw a},this.worker.onmessage=function(a){return function(b){switch(b.data.name){case"generatePrivateKeySign":a.publicKey.der=b.data.publicKey,a.sign.der=b.data.sign,c.run(b.data.callback,a);break;case"generateCRX":a.crx.header=b.data.crxHeader,c.run(b.data.callback,a);break;default:}}}(this)}var b={worker:!!window.Worker,filereader:window.File&&window.Blob&&window.FileList&&window.FileReader,blobbuilder:!!window.BlobBuilder||!!window.MozBlobBuilder||!!window.WebKitBlobBuilder},c=[];return c.run=function(a,b){c[a]&&(c[a].call(b),c[a]=undefined)},c.add=function(a){for(var b=0;b<=c.length;++b)if(typeof c[b]=="undefined"){c[b]=a;break}return b},d.prototype.addZip=function(a,b){switch(b){case"blob":case"file":var c=new FileReader;c.onload=function(a){this.zip.string=a.target.result},c.readAsBinaryString();break;case"typedarray":var d=a.buffer||a;this.zip.string=String.fromCharCode.call(null,new Uint8Array(a));break;case"base64":this.zip.string=window.btoa(a);break;case"string":this.zip.string=a;break;default:this.zip.string=a.toString()}return this},d.prototype.generatePrivateKeySignature=function(a,b){if(!this.zip.string)throw new Error("Need zip file in order to sign");var d=c.add(b);this.worker.postMessage({name:"generatePrivateKeySign",exponent:a.exponent||65537,zip:this.zip.string,callback:d})},d.prototype.generateCrx=function(a,b){if(!this.publicKey.der)throw new Error("Need public key in order to package");if(!this.sign.der)throw new Error("Need signature in order to package");if(!this.zip.string)throw new Error("Need zip file in order to sign");var d=c.add(b);this.worker.postMessage({name:"generateCrx",publicKey:this.publicKey.der,signature:this.sign.der,callback:d})},d.prototype.terminate=function(){this.worker.terminate()},d}(function(){function a(){function a(a,b,c){a!=null&&("number"==typeof a?this.fromNumber(a,b,c):b==null&&"string"!=typeof a?this.fromString(a,256):this.fromString(a,b))}function c(a){var b=1,c;return(c=a>>>16)!=0&&(a=c,b+=16),(c=a>>8)!=0&&(a=c,b+=8),(c=a>>4)!=0&&(a=c,b+=4),(c=a>>2)!=0&&(a=c,b+=2),(c=a>>1)!=0&&(a=c,b+=1),b}function d(a){this.m=a}function e(a){this.m=a,this.mp=a.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<a.DB-15)-1,this.mt2=2*a.t}function f(){}function g(b){this.r2=new a(null),this.q3=new a(null),a.ONE.dlShiftTo(2*b.t,this.r2),this.mu=this.r2.divide(b),this.m=b}function k(a){i[j++]^=a&255,i[j++]^=a>>8&255,i[j++]^=a>>16&255,i[j++]^=a>>24&255,j>=w&&(j-=w)}function l(){k((new Date).getTime())}function p(){if(h==null){l(),h=v(),h.init(i);for(j=0;j<i.length;++j)i[j]=0;j=0}return h.next()}function q(a){var b;for(b=0;b<a.length;++b)a[b]=p()}function r(){}function s(){this.j=this.i=0,this.S=[]}function t(a){var b,c,d;for(b=0;b<256;++b)this.S[b]=b;for(b=c=0;b<256;++b)c=c+this.S[b]+a[b%a.length]&255,d=this.S[b],this.S[b]=this.S[c],this.S[c]=d;this.j=this.i=0}function u(){var a;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,a=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=a,this.S[a+this.S[this.i]&255]}function v(){return new s}function x(b,c){if(c<b.length+11)throw new Error("Message too long for RSA");var d=new Array,e=b.length-1;while(e>=0&&c>0){var f=b.charCodeAt(e--);f<128?d[--c]=f:f>127&&f<2048?(d[--c]=f&63|128,d[--c]=f>>6|192):(d[--c]=f&63|128,d[--c]=f>>6&63|128,d[--c]=f>>12|224)}d[--c]=0;var g=new r,h=new Array;while(c>2){h[0]=0;while(h[0]==0)g.nextBytes(h);d[--c]=h[0]}return d[--c]=2,d[--c]=0,new a(d)}function y(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function z(a,b){var c=a.toByteArray(),d=0;while(d<c.length&&c[d]==0)++d;if(c.length-d!=b-1||c[d]!=2)return null;++d;while(c[d]!=0)if(++d>=c.length)return null;var e="";while(++d<c.length){var f=c[d]&255;f<128?e+=String.fromCharCode(f):f>191&&f<224?(e+=String.fromCharCode((f&31)<<6|c[d+1]&63),++d):(e+=String.fromCharCode((f&15)<<12|(c[d+1]&63)<<6|c[d+2]&63),d+=2)}return e}function C(a,b,c){c=c.toLowerCase();var d=b/4,e=B[c],f=e(a),g="0001",h="00"+A[c]+f,i="",j=d-g.length-h.length;for(var k=0;k<j;k+=2)i+="ff";return sPaddedMessageHex=g+i+h,sPaddedMessageHex}function D(a,b,c){var d=new y;d.setPublic(b,c);var e=d.doPublic(a);return e}function E(a,b,c){var d=D(a,b,c),e=d.toString(16).replace(/^1f+00/,"");return e}function F(a){for(var b in A){var c=A[b],d=c.length;if(a.substring(0,d)==c){var e=[b,a.substring(d)];return e}}return[]}function G(a,b,c,d){var e=E(b,c,d),f=F(e);if(f.length===0)return!1;var g=f[0],h=f[1],i=B[g],j=i(a);return h==j}function H(a){var b=a;return b=b.replace("-----BEGIN CERTIFICATE-----",""),b=b.replace("-----END CERTIFICATE-----",""),b=b.replace(/[ \n]+/g,""),b}function I(a){var b=H(a),c=gb(b);return c}function J(a){var b=S(a,0);return b}function K(a){var b=S(a,0),c=V(a,b);return c.length<1?-1:a.substring(c[0],c[0]+10)=="a003020102"?c.length<6?-1:c[6]:c.length<5?-1:c[5]}function L(a){var b=K(a);if(b==-1)return-1;var c=V(a,b);if(c.length!=2)return-1;var d=c[1];if(a.substring(d,d+2)!="03")return-1;var e=S(a,d);return a.substring(e,e+2)!="00"?-1:e+2}function M(a){var b=L(a),c=V(a,b);if(c.length!=2)return[];var d=T(a,c[0]),e=T(a,c[1]);return d!=null&&e!=null?[d,e]:[]}function N(a){var b=I(a),c=M(b);return c}function O(){this.subjectPublicKeyRSA=null,this.subjectPublicKeyRSA_hN=null,this.subjectPublicKeyRSA_hE=null}function P(a,b){if(a.substring(b+2,b+3)!="8")return 1;var c=parseInt(a.substring(b+3,b+4));return c==0?-1:0<c&&c<10?c+1:-2}function Q(a,b){var c=P(a,b);return c<1?"":a.substring(b+2,b+2+c*2)}function R(b,c){var d=Q(b,c);if(d=="")return-1;var e;return parseInt(d.substring(0,1))<8?e=new a(d,16):e=new a(d.substring(2),16),e.intValue()}function S(a,b){var c=P(a,b);return c<0?c:b+(c+1)*2}function T(a,b){var c=S(a,b),d=R(a,b);return a.substring(c,c+d*2)}function U(a,b){var c=S(a,b),d=R(a,b);return c+d*2}function V(a,b){var c=[],d=S(a,b);c.push(d);var e=R(a,b),f=d,g=0;for(;;){var h=U(a,f);if(h==null||h-d>=e*2)break;if(g>=200)break;c.push(h),f=h,g++}return c}function W(a){var b=a;return b=b.replace("-----BEGIN RSA PRIVATE KEY-----",""),b=b.replace("-----END RSA PRIVATE KEY-----",""),b=b.replace(/[ \n]+/g,""),b}function X(a){var b=[],c=S(a,0),d=U(a,c),e=U(a,d),f=U(a,e),g=U(a,f),h=U(a,g),i=U(a,h),j=U(a,i),k=U(a,j);return b.push(c,d,e,f,g,h,i,j,k),b}function Y(a){var b=X(a),c=T(a,b[0]),d=T(a,b[1]),e=T(a,b[2]),f=T(a,b[3]),g=T(a,b[4]),h=T(a,b[5]),i=T(a,b[6]),j=T(a,b[7]),k=T(a,b[8]),l=[];return l.push(c,d,e,f,g,h,i,j,k),l}function Z(a,b){var c=new y;c.generate(1024,a.toString(16));var d=eb(c.n.toString(16),258),e=eb(c.e.toString(16),6),f=$(d,e),g=c.signString(b,"sha1");return{publicKey:f,sign:g}}function $(a,b){a="0281"+ab(a)+a,b="02"+ab(b)+b;var c="3081"+ab(a+b)+a+b,d="0381"+ab(c)+c,e="300D06092A864886F70D0101010500"+d;return e="3081"+ab(e)+e,e.toLowerCase()}function _(a,b){var c="Cr24\0\0\0";return c+=bb(ab(a,8)+ab(b,8)),c+=bb(a+b),c}function ab(a,b){var c=(a.length/2).toString(16);return cb(eb(c,b))}function bb(a){return a=a.toLowerCase().match(/[0-9a-f]{2}/igm),a=a.map(function(a){return String.fromCharCode(parseInt(a,16))}),a.join("")}function cb(a){a.length%2!==0&&(a="0"+a);var b="",c=a.length;while(c)b+=a.substr(c-2,2),c-=2;return b}function db(a,b){a+="";var c=a.split("").map(function(a){a=a.charCodeAt(0)&255;var b=a.toString(16);return b.length<2&&(b="0"+b),b}).join("");return b?c.toLowerCase():c.toUpperCase()}function eb(a,b){a+="";while(a.length<b)a="0"+a;return a}function fb(a){return window.btoa(bb(a))}function gb(a){return db(window.atob(a))}function hb(a){return window.atob(a).split("").map(function(a){return a.charCodeAt(0)})}a.prototype.am=function(a,b,c,d,e,f){var g=b&16383,h=b>>14;while(--f>=0){var i=this[a]&16383,j=this[a++]>>14,k=h*i+j*g;i=g*i+((k&16383)<<14)+c[d]+e,e=(i>>28)+(k>>14)+h*j,c[d++]=i&268435455}return e},a.prototype.DB=28,a.prototype.DV=1<<a.prototype.DB,a.prototype.DM=a.prototype.DV-1,a.prototype.FV=Math.pow(2,52),a.prototype.F1=52-a.prototype.DB,a.prototype.F2=104-a.prototype.DB-52;var b=function(){var a=[],b,c;b="0".charCodeAt(0);for(c=0;c<=9;++c)a[b++]=c;b="a".charCodeAt(0);for(c=10;c<36;++c)a[b++]=c;b="A".charCodeAt(0);for(c=10;c<36;++c)a[b++]=c;return function(b,c){var d=a[b.charCodeAt(c)];return d==null?-1:d}}();a.prototype.copyTo=function(a){for(var b=this.t-1;b>=0;--b)a[b]=this[b];a.t=this.t,a.s=this.s},a.prototype.fromInt=function(a){return this.t=1,this.s=a<0?-1:0,a>0?this[0]=a:a<-1?this[0]=a+DV:this.t=0,this},a.prototype.fromString=function(c,d){var e;if(d==16)e=4;else if(d==8)e=3;else if(d==256)e=8;else if(d==2)e=1;else if(d==32)e=5;else{if(d!=4){this.fromRadix(c,d);return}e=2}this.t=0,this.s=0;var f=c.length,g=!1,h=0;while(--f>=0){var i=e==8?c[f]&255:b(c,f);if(i<0){c.charAt(f)=="-"&&(g=!0);continue}g=!1,h==0?this[this.t++]=i:h+e>this.DB?(this[this.t-1]|=(i&(1<<this.DB-h)-1)<<h,this[this.t++]=i>>this.DB-h):this[this.t-1]|=i<<h,h+=e,h>=this.DB&&(h-=this.DB)}e==8&&(c[0]&128)!=0&&(this.s=-1,h>0&&(this[this.t-1]|=(1<<this.DB-h)-1<<h)),this.clamp(),g&&a.ZERO.subTo(this,this)},a.prototype.clamp=function(){var a=this.s&this.DM;while(this.t>0&&this[this.t-1]==a)--this.t},a.prototype.toString=function(a){if(this.s<0)return"-"+this.negate().toString(a);var b;if(a==16)b=4;else if(a==8)b=3;else if(a==2)b=1;else if(a==32)b=5;else{if(a!=4)return this.toRadix(a);b=2}var c=(1<<b)-1,d,e=!1,f="",g=this.t,h=this.DB-g*this.DB%b;if(g-->0){h<this.DB&&(d=this[g]>>h)>0&&(e=!0,f="0123456789abcdefghijklmnopqrstuvwxyz".charAt(n));while(g>=0)h<b?(d=(this[g]&(1<<h)-1)<<b-h,d|=this[--g]>>(h+=this.DB-b)):(d=this[g]>>(h-=b)&c,h<=0&&(h+=this.DB,--g)),d>0&&(e=!0),e&&(f+="0123456789abcdefghijklmnopqrstuvwxyz".charAt(d))}return e?f:"0"},a.prototype.negate=function(){var b=new a(null);return a.ZERO.subTo(this,b),b},a.prototype.abs=function(){return this.s<0?this.negate():this},a.prototype.compareTo=function(a){var b=this.s-a.s;if(b!=0)return b;var c=this.t;b=c-a.t;if(b!=0)return b;while(--c>=0)if((b=this[c]-a[c])!=0)return b;return 0},a.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+c(this[this.t-1]^this.s&this.DM)},a.prototype.dlShiftTo=function(a,b){var c;for(c=this.t-1;c>=0;--c)b[c+a]=this[c];for(c=a-1;c>=0;--c)b[c]=0;b.t=this.t+a,b.s=this.s},a.prototype.drShiftTo=function(a,b){for(var c=a;c<this.t;++c)b[c-a]=this[c];b.t=Math.max(this.t-a,0),b.s=this.s},a.prototype.lShiftTo=function(a,b){var c=a%this.DB,d=this.DB-c,e=(1<<d)-1,f=Math.floor(a/this.DB),g=this.s<<c&this.DM,h;for(h=this.t-1;h>=0;--h)b[h+f+1]=this[h]>>d|g,g=(this[h]&e)<<c;for(h=f-1;h>=0;--h)b[h]=0;b[f]=g,b.t=this.t+f+1,b.s=this.s,b.clamp()},a.prototype.rShiftTo=function(a,b){b.s=this.s;var c=Math.floor(a/this.DB);if(c>=this.t){b.t=0;return}var d=a%this.DB,e=this.DB-d,f=(1<<d)-1;b[0]=this[c]>>d;for(var g=c+1;g<this.t;++g)b[g-c-1]|=(this[g]&f)<<e,b[g-c]=this[g]>>d;d>0&&(b[this.t-c-1]|=(this.s&f)<<e),b.t=this.t-c,b.clamp()},a.prototype.subTo=function(a,b){var c=0,d=0,e=Math.min(a.t,this.t);while(c<e)d+=this[c]-a[c],b[c++]=d&this.DM,d>>=this.DB;if(a.t<this.t){d-=a.s;while(c<this.t)d+=this[c],b[c++]=d&this.DM,d>>=this.DB;d+=this.s}else{d+=this.s;while(c<a.t)d-=a[c],b[c++]=d&this.DM,d>>=this.DB;d-=a.s}b.s=d<0?-1:0,d<-1?b[c++]=this.DV+d:d>0&&(b[c++]=d),b.t=c,b.clamp()},a.prototype.multiplyTo=function(b,c){var d=this.abs(),e=b.abs(),f=d.t;c.t=f+e.t;while(--f>=0)c[f]=0;for(f=0;f<e.t;++f)c[f+d.t]=d.am(0,e[f],c,f,0,d.t);c.s=0,c.clamp(),this.s!=b.s&&a.ZERO.subTo(c,c)},a.prototype.squareTo=function(a){var b=this.abs(),c=a.t=2*b.t;while(--c>=0)a[c]=0;for(c=0;c<b.t-1;++c){var d=b.am(c,b[c],a,2*c,0,1);(a[c+b.t]+=b.am(c+1,2*b[c],a,2*c+1,d,b.t-c-1))>=b.DV&&(a[c+b.t]-=b.DV,a[c+b.t+1]=1)}a.t>0&&(a[a.t-1]+=b.am(c,b[c],a,2*c,0,1)),a.s=0,a.clamp()},a.prototype.divRemTo=function(b,d,e){var f=b.abs();if(f.t<=0)return;var g=this.abs();if(g.t<f.t){d!=null&&d.fromInt(0),e!=null&&this.copyTo(e);return}e==null&&(e=new a(null));var h=new a(null),i=this.s,j=b.s,k=this.DB-c(f[f.t-1]);k>0?(f.lShiftTo(k,h),g.lShiftTo(k,e)):(f.copyTo(h),g.copyTo(e));var l=h.t,m=h[l-1];if(m==0)return;var n=m*(1<<this.F1)+(l>1?h[l-2]>>this.F2:0),o=this.FV/n,p=(1<<this.F1)/n,q=1<<this.F2,r=e.t,s=r-l,t=d==null?new a(null):d;h.dlShiftTo(s,t),e.compareTo(t)>=0&&(e[e.t++]=1,e.subTo(t,e)),a.ONE.dlShiftTo(l,t),t.subTo(h,h);while(h.t<l)h[h.t++]=0;while(--s>=0){var u=e[--r]==m?this.DM:Math.floor(e[r]*o+(e[r-1]+q)*p);if((e[r]+=h.am(0,u,e,s,0,l))<u){h.dlShiftTo(s,t),e.subTo(t,e);while(e[r]<--u)e.subTo(t,e)}}d!=null&&(e.drShiftTo(l,d),i!=j&&a.ZERO.subTo(d,d)),e.t=l,e.clamp(),k>0&&e.rShiftTo(k,e),i<0&&a.ZERO.subTo(e,e)},a.prototype.mod=function(b){var c=new a(null);return this.abs().divRemTo(b,null,c),this.s<0&&c.compareTo(a.ZERO)>0&&b.subTo(c,c),c},d.prototype.convert=function(a){return a.s<0||a.compareTo(this.m)>=0?a.mod(this.m):a},d.prototype.revert=function(a){return a},d.prototype.reduce=function(a){a.divRemTo(this.m,null,a)},d.prototype.mulTo=function(a,b,c){a.multiplyTo(b,c),this.reduce(c)},d.prototype.sqrTo=function(a,b){a.squareTo(b),this.reduce(b)},a.prototype.invDigit=function(){if(this.t<1)return 0;var a=this[0];if((a&1)==0)return 0;var b=a&3;return b=b*(2-(a&15)*b)&15,b=b*(2-(a&255)*b)&255,b=b*(2-((a&65535)*b&65535))&65535,b=b*(2-a*b%this.DV)%this.DV,b>0?this.DV-b:-b},e.prototype.convert=function(b){var c=new a(null);return b.abs().dlShiftTo(this.m.t,c),c.divRemTo(this.m,null,c),b.s<0&&c.compareTo(a.ZERO)>0&&this.m.subTo(c,c),c},e.prototype.revert=function(b){var c=new a(null);return b.copyTo(c),this.reduce(c),c},e.prototype.reduce=function(a){while(a.t<=this.mt2)a[a.t++]=0;for(var b=0;b<this.m.t;++b){var c=a[b]&32767,d=c*this.mpl+((c*this.mph+(a[b]>>15)*this.mpl&this.um)<<15)&a.DM;c=b+this.m.t,a[c]+=this.m.am(0,d,a,b,0,this.m.t);while(a[c]>=a.DV)a[c]-=a.DV,a[++c]++}a.clamp(),a.drShiftTo(this.m.t,a),a.compareTo(this.m)>=0&&a.subTo(this.m,a)},e.prototype.sqrTo=function(a,b){a.squareTo(b),this.reduce(b)},e.prototype.mulTo=function(a,b,c){a.multiplyTo(b,c),this.reduce(c)},a.prototype.isEven=function(){return(this.t>0?this[0]&1:this.s)==0},a.prototype.exp=function(b,d){if(b>4294967295||b<1)return a.ONE;var e=new a(null),f=new a(null),g=d.convert(this),h=c(b)-1;g.copyTo(e);while(--h>=0){d.sqrTo(e,f);if((b&1<<h)>0)d.mulTo(f,g,e);else{var i=e;e=f,f=i}}return d.revert(e)},a.prototype.modPowInt=function(a,b){var c;return a<256||b.isEven()?c=new d(b):c=new e(b),this.exp(a,c)},a.ZERO=(new a(null)).fromInt(0),a.ONE=(new a(null)).fromInt(1),a.prototype.clone=function(){var b=new a(null);return this.copyTo(b),b},a.prototype.intValue=function(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},a.prototype.byteValue=function(){return this.t==0?this.s:this[0]<<24>>24},a.prototype.shortValue=function(){return this.t==0?this.s:this[0]<<16>>16},a.prototype.chunkSize=function(a){return Math.floor(Math.LN2*this.DB/Math.log(a))},a.prototype.signum=function(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1},a.prototype.toRadix=function(b){b==null&&(b=10);if(this.signum()==0||b<2||b>36)return"0";var c=this.chunkSize(b),d=Math.pow(b,c),e=(new a(null)).fromInt(d),f=new a(null),g=new a(null),h="";this.divRemTo(e,f,g);while(f.signum()>0)h=(d+g.intValue()).toString(b).substr(1)+h,f.divRemTo(e,f,g);return g.intValue().toString(b)+h},a.prototype.fromRadix=function(c,d){this.fromInt(0),d==null&&(d=10);var e=this.chunkSize(d),f=Math.pow(d,e),g=!1,h=0,i=0;for(var j=0;j<c.length;++j){var k=b(c,j);if(k<0){c.charAt(j)=="-"&&this.signum()==0&&(g=!0);continue}i=d*i+k,++h>=e&&(this.dMultiply(f),this.dAddOffset(i,0),h=0,i=0)}h>0&&(this.dMultiply(Math.pow(d,h)),this.dAddOffset(i,0)),g&&a.ZERO.subTo(this,this)},a.prototype.fromNumber=function(b,c,d){if("number"==typeof c)if(b<2)this.fromInt(1);else{this.fromNumber(b,d),this.testBit(b-1)||this.bitwiseTo(a.ONE.shiftLeft(b-1),function(a,b){return a|b},this),this.isEven()&&this.dAddOffset(1,0);while(!this.isProbablePrime(c))this.dAddOffset(2,0),this.bitLength()>b&&this.subTo(a.ONE.shiftLeft(b-1),this)}else{var e=new Array,f=b&7;e.length=(b>>3)+1,c.nextBytes(e),f>0?e[0]&=(1<<f)-1:e[0]=0,this.fromString(e,256)}},a.prototype.toByteArray=function(){var a=this.t,b=new Array;b[0]=this.s;var c=this.DB-a*this.DB%8,d,e=0;if(a-->0){c<this.DB&&(d=this[a]>>c)!=(this.s&this.DM)>>c&&(b[e++]=d|this.s<<this.DB-c);while(a>=0){c<8?(d=(this[a]&(1<<c)-1)<<8-c,d|=this[--a]>>(c+=this.DB-8)):(d=this[a]>>(c-=8)&255,c<=0&&(c+=this.DB,--a)),(d&128)!=0&&(d|=-256),e==0&&(this.s&128)!=(d&128)&&++e;if(e>0||d!=this.s)b[e++]=d}}return b},a.prototype.equals=function(a){return this.compareTo(a)==0},a.prototype.min=function(a){return this.compareTo(a)<0?this:a},a.prototype.max=function(a){return this.compareTo(a)>0?this:a},a.prototype.bitwiseTo=function(a,b,c){var d,e,f=Math.min(a.t,this.t);for(d=0;d<f;++d)c[d]=b(this[d],a[d]);if(a.t<this.t){e=a.s&this.DM;for(d=f;d<this.t;++d)c[d]=b(this[d],e);c.t=this.t}else{e=this.s&this.DM;for(d=f;d<a.t;++d)c[d]=b(e,a[d]);c.t=a.t}c.s=b(this.s,a.s),c.clamp()},a.prototype.and=function(b){var c=new a(null);return this.bitwiseTo(b,function(a,b){return a&b},c),c},a.prototype.or=function(b){var c=new a(null);return this.bitwiseTo(b,function(a,b){return a|b},c),c},a.prototype.xor=function(b){var c=new a(null);return this.bitwiseTo(b,function(a,b){return a^b},c),c},a.prototype.andNot=function(b){var c=new a(null);return this.bitwiseTo(b,function(a,b){return a&~b},c),c},a.prototype.not=function(){var b=new a(null);for(var c=0;c<this.t;++c)b[c]=this.DM&~this[c];return b.t=this.t,b.s=~this.s,b},a.prototype.shiftLeft=function(b){var c=new a(null);return b<0?this.rShiftTo(-b,c):this.lShiftTo(b,c),c},a.prototype.shiftRight=function(b){var c=new a(null);return b<0?this.lShiftTo(-b,c):this.rShiftTo(b,c),c},a.prototype.getLowestSetBit=function(a){return function(){for(var b=0;b<this.t;++b)if(this[b]!=0)return b*this.DB+a(this[b]);return this.s<0?this.t*this.DB:-1}}(function(a){if(a==0)return-1;var b=0;return(a&65535)==0&&(a>>=16,b+=16),(a&255)==0&&(a>>=8,b+=8),(a&15)==0&&(a>>=4,b+=4),(a&3)==0&&(a>>=2,b+=2),(a&1)==0&&++b,b}),a.prototype.bitCount=function(a){return function(){var b=0,c=this.s&this.DM;for(var d=0;d<this.t;++d)b+=a(this[d]^c);return b}}(function(a){var b=0;while(a!=0)a&=a-1,++b;return b}),a.prototype.testBit=function(a){var b=Math.floor(a/this.DB);return b>=this.t?this.s!=0:(this[b]&1<<a%this.DB)!=0},a.prototype.changeBit=function(b,c){var d=a.ONE.shiftLeft(b);return this.bitwiseTo(d,c,d),d},a.prototype.setBit=function(a){return this.changeBit(a,function(a,b){return a|b})},a.prototype.clearBit=function(a){return this.changeBit(a,function(a,b){return a&~b})},a.prototype.flipBit=function(a){return this.changeBit(a,function(a,b){return a^b})},a.prototype.addTo=function(a,b){var c=0,d=0,e=Math.min(a.t,this.t);while(c<e)d+=this[c]+a[c],b[c++]=d&this.DM,d>>=this.DB;if(a.t<this.t){d+=a.s;while(c<this.t)d+=this[c],b[c++]=d&this.DM,d>>=this.DB;d+=this.s}else{d+=this.s;while(c<a.t)d+=a[c],b[c++]=d&this.DM,d>>=this.DB;d+=a.s}b.s=d<0?-1:0,d>0?b[c++]=d:d<-1&&(b[c++]=this.DV+d),b.t=c,b.clamp()},a.prototype.add=function(b){var c=new a(null);return this.addTo(b,c),c},a.prototype.subtract=function(b){var c=new a(null);return this.subTo(b,c),c},a.prototype.multiply=function(b){var c=new a(null);return this.multiplyTo(b,c),c},a.prototype.square=function(){var b=new a(null);return this.squareTo(b),b},a.prototype.divide=function(b){var c=new a(null);return this.divRemTo(b,c,null),c},a.prototype.remainder=function(b){var c=new a(null);return this.divRemTo(b,null,c),c},a.prototype.divideAndRemainder=function(b){var c=new a(null),d=new a(null);return this.divRemTo(b,c,d),new Array(c,d)},a.prototype.dMultiply=function(a){this[this.t]=this.am(0,a-1,this,0,0,this.t),++this.t,this.clamp()},a.prototype.dAddOffset=function(a,b){if(a==0)return;while(this.t<=b)this[this.t++]=0;this[b]+=a;while(this[b]>=this.DV)this[b]-=this.DV,++b>=this.t&&(this[this.t++]=0),++this[b]},f.prototype.convert=function(a){return a},f.prototype.revert=function(a){return a},f.prototype.mulTo=function(a,b,c){a.multiplyTo(b,c)},f.prototype.sqrTo=function(a,b){a.squareTo(b)},a.prototype.pow=function(a){return this.exp(a,new f)},a.prototype.multiplyLowerTo=function(a,b,c){var d=Math.min(this.t+a.t,b);c.s=0,c.t=d;while(d>0)c[--d]=0;var e;for(e=c.t-this.t;d<e;++d)c[d+this.t]=this.am(0,a[d],c,d,0,this.t);for(e=Math.min(a.t,b);d<e;++d)this.am(0,a[d],c,d,0,b-d);c.clamp()},a.prototype.multiplyUpperTo=function(a,b,c){--b;var d=c.t=this.t+a.t-b;c.s=0;while(--d>=0)c[d]=0;for(d=Math.max(b-this.t,0);d<a.t;++d)c[this.t+d-b]=this.am(b-d,a[d],c,0,0,this.t+d-b);c.clamp(),c.drShiftTo(1,c)},g.prototype.convert=function(b){if(b.s<0||b.t>2*this.m.t)return b.mod(this.m);if(b.compareTo(this.m)<0)return b;var c=new a(null);return b.copyTo(c),this.reduce(c),c},g.prototype.revert=function(a){return a},g.prototype.reduce=function(a){a.drShiftTo(this.m.t-1,this.r2),a.t>this.m.t+1&&(a.t=this.m.t+1,a.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(a.compareTo(this.r2)<0)a.dAddOffset(1,this.m.t+1);a.subTo(this.r2,a);while(a.compareTo(this.m)>=0)a.subTo(this.m,a)},g.prototype.sqrTo=function(a,b){a.squareTo(b),this.reduce(b)},g.prototype.mulTo=function(a,b,c){a.multiplyTo(b,c),this.reduce(c)},a.prototype.modPow=function(b,f){var h=b.bitLength(),i,j=(new a(null)).fromInt(1),k;if(h<=0)return j;h<18?i=1:h<48?i=3:h<144?i=4:h<768?i=5:i=6,h<8?k=new d(f):f.isEven()?k=new g(f):k=new e(f);var l=new Array,m=3,n=i-1,o=(1<<i)-1;l[1]=k.convert(this);if(i>1){var p=new a(null);k.sqrTo(l[1],p);while(m<=o)l[m]=new a(null),k.mulTo(p,l[m-2],l[m]),m+=2}var q=b.t-1,r,s=!0,t=new a(null),u;h=c(b[q])-1;while(q>=0){h>=n?r=b[q]>>h-n&o:(r=(b[q]&(1<<h+1)-1)<<n-h,q>0&&(r|=b[q-1]>>this.DB+h-n)),m=i;while((r&1)==0)r>>=1,--m;(h-=m)<0&&(h+=this.DB,--q);if(s)l[r].copyTo(j),s=!1;else{while(m>1)k.sqrTo(j,t),k.sqrTo(t,j),m-=2;m>0?k.sqrTo(j,t):(u=j,j=t,t=u),k.mulTo(t,l[r],j)}while(q>=0&&(b[q]&1<<h)==0)k.sqrTo(j,t),u=j,j=t,t=u,--h<0&&(h=this.DB-1,--q)}return k.revert(j)},a.prototype.gcd=function(a){var b=this.s<0?this.negate():this.clone(),c=a.s<0?a.negate():a.clone();if(b.compareTo(c)<0){var d=b;b=c,c=d}var e=b.getLowestSetBit(),f=c.getLowestSetBit();if(f<0)return b;e<f&&(f=e),f>0&&(b.rShiftTo(f,b),c.rShiftTo(f,c));while(b.signum()>0)(e=b.getLowestSetBit())>0&&b.rShiftTo(e,b),(e=c.getLowestSetBit())>0&&c.rShiftTo(e,c),b.compareTo(c)>=0?(b.subTo(c,b),b.rShiftTo(1,b)):(c.subTo(b,c),c.rShiftTo(1,c));return f>0&&c.lShiftTo(f,c),c},a.prototype.modInt=function(a){if(a<=0)return 0;var b=this.DV%a,c=this.s<0?a-1:0;if(this.t>0)if(b==0)c=this[0]%a;else for(var d=this.t-1;d>=0;--d)c=(b*c+this[d])%a;return c},a.prototype.modInverse=function(b){var c=b.isEven();if(this.isEven()&&c||b.signum()==0)return a.ZERO;var d=b.clone(),e=this.clone(),f=(new a(null)).fromInt(1),g=(new a(null)).fromInt(0),h=(new a(null)).fromInt(0),i=(new a(null)).fromInt(1);while(d.signum()!=0){while(d.isEven()){d.rShiftTo(1,d);if(c){if(!f.isEven()||!g.isEven())f.addTo(this,f),g.subTo(b,g);f.rShiftTo(1,f)}else g.isEven()||g.subTo(b,g);g.rShiftTo(1,g)}while(e.isEven()){e.rShiftTo(1,e);if(c){if(!h.isEven()||!i.isEven())h.addTo(this,h),i.subTo(b,i);h.rShiftTo(1,h)}else i.isEven()||i.subTo(b,i);i.rShiftTo(1,i)}d.compareTo(e)>=0?(d.subTo(e,d),c&&f.subTo(h,f),g.subTo(i,g)):(e.subTo(d,e),c&&h.subTo(f,h),i.subTo(g,i))}return e.compareTo(a.ONE)!=0?a.ZERO:i.compareTo(b)>=0?i.subtract(b):i.signum()<0?(i.addTo(b,i),i.signum()<0?i.add(b):i):i},function(){var b=[];"020305070b0d0h0j0n0t0v1115171b1h1n1p1v1z21272b2h2p2t2v2z31353j3n3t3v45474d4j4n4t4z515b5d5h5j5v676b6d6h6n6p6z757b7h7j7p7t7v858j8n8p8t979d9n9p9t9za7adajanatb1b5bdbnbpbzc1c7cbchcpctcvczdbdjdndvdze5ehejf1f7fhfnftfvg1gbghgngpgvh1h5h7hjhthvhzi5ibidipitizj7jhjpjzk7kdkjknkvl1l5ldlhlvm5mhmjmtmvmzn1nbnpntnvnzodohojonp7pbpjptq1q5qbqhqvqzr5rbrjrp".split("").reduce(function(a,c,d){return d%2==1&&b.push(parseInt(a+c,36)),c});var c=(1<<26)/b[b.length-1];a.prototype.isProbablePrime=function(a){var d,e=this.abs();if(e.t==1&&e[0]<=b[b.length-1]){for(d=0;d<b.length;++d)if(e[0]==b[d])return!0;return!1}if(e.isEven())return!1;d=1;while(d<b.length){var f=b[d],g=d+1;while(g<b.length&&f<c)f*=b[g++];f=e.modInt(f);while(d<g)if(f%b[d++]==0)return!1}return e.millerRabin(a)},a.prototype.millerRabin=function(c){var d=this.subtract(a.ONE),e=d.getLowestSetBit();if(e<=0)return!1;var f=d.shiftRight(e);c=c+1>>1,c>b.length&&(c=b.length);var g=new a(null);for(var h=0;h<c;++h){g.fromInt(b[Math.floor(Math.random()*b.length)]);var i=g.modPow(f,this);if(i.compareTo(a.ONE)!=0&&i.compareTo(d)!=0){var j=1;while(j++<e&&i.compareTo(d)!=0){i=i.modPowInt(2,this);if(i.compareTo(a.ONE)==0)return!1}if(i.compareTo(d)!=0)return!1}}return!0}}();var h,i,j;if(i==null){i=[],j=0;var m;if(navigator.appName=="Netscape"&&navigator.appVersion<"5"&&window.crypto){var o=window.crypto.random(32);for(m=0;m<o.length;++m)i[j++]=o.charCodeAt(m)&255}for(;j<w;)m=Math.floor(65536*Math.random()),i[j++]=m>>>8,i[j++]=m&255;j=0,l()}r.prototype.nextBytes=q,s.prototype.init=t,s.prototype.next=u;var w=256;y.prototype.setPublic=function(b,c){if(!(b!=null&&c!=null&&b.length>0&&c.length>0))throw new Error("Invalid RSA public key");this.n=new a(b,16),this.e=parseInt(c,16)},y.prototype.doPublic=function(a){return a.modPowInt(this.e,this.n)},y.prototype.encrypt=function(a){var b=x(a,this.n.bitLength()+7>>3);if(b==null)return null;var c=this.doPublic(b);if(c==null)return null;var d=c.toString(16);return(d.length&1)==0?d:"0"+d},y.prototype.setPrivate=function(b,c,d){if(!(b!=null&&c!=null&&b.length>0&&c.length>0))throw new Error("Invalid RSA private key");this.n=new a(b,16),this.e=parseInt(c,16),this.d=new a(d,16)},y.prototype.setPrivateEx=function(b,c,d,e,f,g,h,i){if(!(b!=null&&c!=null&&b.length>0&&c.length>0))throw new Error("Invalid RSA private key");this.n=new a(b,16),this.e=parseInt(c,16),this.d=new a(d,16),this.p=new a(e,16),this.q=new a(f,16),this.dmp1=new a(g,16),this.dmq1=new a(h,16),this.coeff=new a(i,16)},y.prototype.generate=function(b,c){var d=new r,e=b>>1;this.e=parseInt(c,16);var f=new a(c,16);for(;;){for(;;){this.p=new a(b-e,1,d);if(this.p.subtract(a.ONE).gcd(f).compareTo(a.ONE)==0&&this.p.isProbablePrime(10))break}for(;;){this.q=new a(e,1,d);if(this.q.subtract(a.ONE).gcd(f).compareTo(a.ONE)==0&&this.q.isProbablePrime(10))break}if(this.p.compareTo(this.q)<=0){var g=this.p;this.p=this.q,this.q=g}var h=this.p.subtract(a.ONE),i=this.q.subtract(a.ONE),j=h.multiply(i);if(j.gcd(f).compareTo(a.ONE)==0){this.n=this.p.multiply(this.q),this.d=f.modInverse(j),this.dmp1=this.d.mod(h),this.dmq1=this.d.mod(i),this.coeff=this.q.modInverse(this.p);break}}},y.prototype.doPrivate=function(a){if(this.p==null||this.q==null)return a.modPow(this.d,this.n);var b=a.mod(this.p).modPow(this.dmp1,this.p),c=a.mod(this.q).modPow(this.dmq1,this.q);while(b.compareTo(c)<0)b=b.add(this.p);return b.subtract(c).multiply(this.coeff).mod(this.p).multiply(this.q).add(c)},y.prototype.decrypt=function(b){var c=new a(b,16),d=this.doPrivate(c);return d==null?null:z(d,this.n.bitLength()+7>>3)},SHA1=function(a){function b(a,b){return a<<b|a>>>32-b}a+="";for(var c=Math,d=[1518500249,1859775393,2400959708,3395469782,1732584193,4023233417,2562383102,271733878,3285377520,4294967295],e=c.ceil(a.length/4)+2,f=c.ceil(e/16),g=[],h=0,i=[],j,k,l,m,n,p,q,r;h<f;h++){g[h]=[];for(r=0;r<16;r++){function s(b,c){return a.charCodeAt(h*64+r*4+b)<<c}g[h][r]=s(0,24)|s(1,16)|s(2,8)|s(3,0)}}p=a.length*8-8,h=f-1,g[h][14]=p/(d[9]+1),g[h][14]=c.floor(g[h][14]),g[h][15]=p&d[9];for(h=0;h<f;h++){for(q=0;q<16;q++)i[q]=g[h][q];for(q=16;q<80;q++)i[q]=b(i[q-3]^i[q-8]^i[q-14]^i[q-16],1);j=d[4],k=d[5],l=d[6],m=d[7],n=d[8];for(q=0;q<80;q++){var t=c.floor(q/20),u=b(j,5)+(t<1?k&l^~k&m:t==2?k&l^k&m^l&m:k^l^m)+n+d[t]+i[q]&d[9];n=m,m=l,l=b(k,30),k=j,j=u}d[4]+=j,d[5]+=k,d[6]+=l,d[7]+=m,d[8]+=n}p="";for(o=4;o<9;o++)for(h=7;h>=0;h--)p+=((d[o]&d[9])>>>h*4&15).toString(16);return p};var A={sha1:"3021300906052b0e03021a05000414"},B={sha1:SHA1};y.prototype.signString=function(b,c){var d=C(b,this.n.bitLength(),c),e=new a(d,16),f=this.doPrivate(e),g=f.toString(16);return g},y.prototype.verifyHexSignatureForMessage=function(b,c){var d=new a(b,16),e=G(c,d,this.n.toString(16),this.e.toString(16));return e},y.prototype.verifyString=function(b,c){c=c.replace(/[ \n]+/g,"");var d=new a(c,16),e=this.doPublic(d),f=e.toString(16).replace(/^1f+00/,""),g=F(f);if(g.length===0)return!1;var h=g[0],i=g[1],j=B[h],k=j(b);return i==k},O.prototype.readCertPEM=function(a){var b=I(a),c=M(b),d=new y;d.setPublic(c[0],c[1]),this.subjectPublicKeyRSA=d,this.subjectPublicKeyRSA_hN=c[0],this.subjectPublicKeyRSA_hE=c[1]},O.prototype.readCertPEMWithoutRSAInit=function(a){var b=I(a),c=M(b);this.subjectPublicKeyRSA.setPublic(c[0],c[1]),this.subjectPublicKeyRSA_hN=c[0],this.subjectPublicKeyRSA_hE=c[1]},y.prototype.readPrivateKeyFromPEMString=function(a){var b=W(a),c=gb(b),d=Y(c);this.setPrivateEx(d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8])},self.onmessage=function(a){switch(a.data.name){case"generatePrivateKeySign":var b=Z(a.data.exponent,a.data.zip);postMessage({name:"generatePrivateKeySign",publicKey:b.publicKey,sign:b.sign,callback:a.data.callback});break;case"generateCrx":var b=_(a.data.publicKey,a.data.signature);postMessage({name:"generateCRX",crxHeader:b,callback:a.data.callback});break;default:}}}function b(a){function b(){try{return new BlobBuilder}catch(a){}try{return new WebKitBlobBuilder}catch(a){}try{return new MozBlobBuilder}catch(a){}throw new Error("No BlobBuilder support")}function c(a){try{return window.URL.createObjectURL(a)}catch(b){}try{return window.webkitURL.createObjectURL(a)}catch(b){}try{return window.createObjectURL(a)}catch(b){}try{return window.createBlobURL(a)}catch(b){}throw new Error("No support for creating object URLs")}var d=b(),e=new Uint8Array(a.split("").map(function(a){return a.charCodeAt(0)}));return d.append(e.buffer),c(d.getBlob())}return b("("+a.toString()+"())")}())